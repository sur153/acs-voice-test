<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TeleLife - Omnichannel Application Assistant</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #1a365d 0%, #2d3748 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      background: rgba(255,255,255,0.95);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .logo-text {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1a365d;
    }

    .logo-text span {
      color: #2563eb;
    }

    .progress-bar {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .progress-label {
      font-size: 0.85rem;
      color: #64748b;
    }

    .progress-track {
      width: 200px;
      height: 8px;
      background: #e2e8f0;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .progress-text {
      font-size: 0.85rem;
      font-weight: 600;
      color: #1a365d;
    }

    /* Main Container */
    .main-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .chat-container {
      width: 100%;
      max-width: 800px;
      height: 600px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Mode Tabs */
    .mode-tabs {
      display: flex;
      background: #f8fafc;
      border-bottom: 1px solid #e2e8f0;
    }

    .mode-tab {
      flex: 1;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      cursor: pointer;
      border: none;
      background: transparent;
      font-size: 0.95rem;
      color: #64748b;
      transition: all 0.3s ease;
      position: relative;
    }

    .mode-tab:hover {
      background: #f1f5f9;
    }

    .mode-tab.active {
      color: #2563eb;
      background: white;
    }

    .mode-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 3px;
      background: #2563eb;
    }

    .mode-tab .icon {
      font-size: 1.2rem;
    }

    .mode-tab .status {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #e2e8f0;
    }

    .mode-tab.active .status {
      background: #22c55e;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Conversation Area */
    .conversation {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      max-width: 80%;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message.user {
      align-self: flex-end;
    }

    .message.ai {
      align-self: flex-start;
    }

    .message.system {
      align-self: center;
      max-width: 90%;
    }

    .message-bubble {
      padding: 0.875rem 1.125rem;
      border-radius: 16px;
      line-height: 1.5;
    }

    .message.user .message-bubble {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message.ai .message-bubble {
      background: #f1f5f9;
      color: #1e293b;
      border-bottom-left-radius: 4px;
    }

    .message.system .message-bubble {
      background: #fef3c7;
      color: #92400e;
      font-size: 0.875rem;
      text-align: center;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .message-meta {
      font-size: 0.75rem;
      color: #94a3b8;
      margin-top: 0.25rem;
      padding: 0 0.5rem;
    }

    .message.user .message-meta {
      text-align: right;
    }

    .message-mode {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(0,0,0,0.05);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.7rem;
      margin-left: 0.5rem;
    }

    /* Voice Mode Overlay */
    .voice-overlay {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 2rem;
      flex: 1;
    }

    .voice-overlay.active {
      display: flex;
    }

    .voice-visualizer {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #3b82f6);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .voice-visualizer::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: inherit;
      animation: voicePulse 1.5s ease-in-out infinite;
      opacity: 0.3;
    }

    @keyframes voicePulse {
      0%, 100% { transform: scale(1); opacity: 0.3; }
      50% { transform: scale(1.2); opacity: 0.1; }
    }

    .voice-visualizer .mic-icon {
      font-size: 3rem;
      color: white;
    }

    .voice-status {
      font-size: 1.25rem;
      color: #1e293b;
      font-weight: 500;
    }

    .voice-transcript {
      font-size: 1rem;
      color: #64748b;
      text-align: center;
      max-width: 400px;
      min-height: 3rem;
    }

    /* Agent Queue Overlay */
    .agent-overlay {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      padding: 2rem;
      flex: 1;
    }

    .agent-overlay.active {
      display: flex;
    }

    .agent-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, #10b981, #059669);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      color: white;
    }

    .agent-info {
      text-align: center;
    }

    .agent-name {
      font-size: 1.25rem;
      font-weight: 600;
      color: #1e293b;
    }

    .agent-status {
      font-size: 0.9rem;
      color: #64748b;
    }

    .queue-position {
      background: #f1f5f9;
      padding: 1rem 2rem;
      border-radius: 8px;
      text-align: center;
    }

    .queue-label {
      font-size: 0.85rem;
      color: #64748b;
    }

    .queue-number {
      font-size: 2rem;
      font-weight: 700;
      color: #2563eb;
    }

    .queue-time {
      font-size: 0.85rem;
      color: #64748b;
    }

    /* Input Area */
    .input-area {
      padding: 1rem 1.5rem;
      background: #f8fafc;
      border-top: 1px solid #e2e8f0;
    }

    .input-wrapper {
      display: flex;
      gap: 0.75rem;
      align-items: flex-end;
    }

    .text-input {
      flex: 1;
      padding: 0.875rem 1rem;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.2s;
      resize: none;
      max-height: 120px;
    }

    .text-input:focus {
      border-color: #2563eb;
    }

    .input-actions {
      display: flex;
      gap: 0.5rem;
    }

    .action-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      transition: all 0.2s;
    }

    .action-btn.send {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      color: white;
    }

    .action-btn.send:hover {
      transform: scale(1.05);
    }

    .action-btn.voice {
      background: #f1f5f9;
      color: #64748b;
    }

    .action-btn.voice:hover {
      background: #e2e8f0;
      color: #2563eb;
    }

    .action-btn.voice.active {
      background: #dc2626;
      color: white;
    }

    /* Quick Actions */
    .quick-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
      flex-wrap: wrap;
    }

    .quick-action {
      padding: 0.5rem 1rem;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      font-size: 0.85rem;
      color: #64748b;
      cursor: pointer;
      transition: all 0.2s;
    }

    .quick-action:hover {
      border-color: #2563eb;
      color: #2563eb;
    }

    /* Switch Mode Banner */
    .switch-banner {
      display: none;
      background: linear-gradient(90deg, #2563eb, #3b82f6);
      color: white;
      padding: 0.75rem 1rem;
      text-align: center;
      font-size: 0.9rem;
      cursor: pointer;
      transition: opacity 0.3s;
    }

    .switch-banner:hover {
      opacity: 0.9;
    }

    .switch-banner.visible {
      display: block;
    }

    /* Footer */
    .footer {
      text-align: center;
      padding: 1rem;
      color: rgba(255,255,255,0.6);
      font-size: 0.85rem;
    }

    /* Typing indicator */
    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 0.875rem 1.125rem;
      background: #f1f5f9;
      border-radius: 16px;
      border-bottom-left-radius: 4px;
      width: fit-content;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: #94a3b8;
      border-radius: 50%;
      animation: typingBounce 1.4s ease-in-out infinite;
    }

    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingBounce {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-4px); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <div class="logo-icon">P</div>
      <div class="logo-text">Protective <span>TeleLife</span></div>
    </div>
    <div class="progress-bar">
      <span class="progress-label">Application Progress</span>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill" style="width: 25%"></div>
      </div>
      <span class="progress-text" id="progressText">25%</span>
    </div>
  </header>

  <!-- Main Container -->
  <main class="main-container">
    <div class="chat-container">
      <!-- Mode Tabs -->
      <div class="mode-tabs">
        <button class="mode-tab active" data-mode="chat" onclick="switchMode('chat')">
          <span class="icon">üí¨</span>
          <span>Chat</span>
          <span class="status"></span>
        </button>
        <button class="mode-tab" data-mode="voice" onclick="switchMode('voice')">
          <span class="icon">üéôÔ∏è</span>
          <span>Voice</span>
          <span class="status"></span>
        </button>
        <button class="mode-tab" data-mode="agent" onclick="switchMode('agent')">
          <span class="icon">üë§</span>
          <span>Agent</span>
          <span class="status"></span>
        </button>
      </div>

      <!-- Switch Mode Banner -->
      <div class="switch-banner" id="switchBanner" onclick="handleBannerClick()">
        <span id="bannerText">Would you prefer to continue by voice? Click here to switch.</span>
      </div>

      <!-- Chat Conversation -->
      <div class="conversation" id="conversation">
        <div class="message ai">
          <div class="message-bubble">
            Hello! I'm your TeleLife application assistant. I'll help you complete your life insurance application today.
            <br><br>
            You can type your responses, or switch to voice anytime if you prefer speaking. Let's get started!
          </div>
          <div class="message-meta">AI Assistant <span class="message-mode">üí¨ Chat</span></div>
        </div>

        <div class="message ai">
          <div class="message-bubble">
            First, I need to verify some basic information. What is your full legal name as it appears on your ID?
          </div>
          <div class="message-meta">AI Assistant</div>
        </div>
      </div>

      <!-- Voice Overlay -->
      <div class="voice-overlay" id="voiceOverlay">
        <div class="voice-visualizer">
          <span class="mic-icon">üéôÔ∏è</span>
        </div>
        <div class="voice-status" id="voiceStatus">Listening...</div>
        <div class="voice-transcript" id="voiceTranscript">"..."</div>
      </div>

      <!-- Agent Queue Overlay -->
      <div class="agent-overlay" id="agentOverlay">
        <div class="agent-avatar">üë§</div>
        <div class="agent-info">
          <div class="agent-name">Connecting to Agent</div>
          <div class="agent-status">Please hold while we connect you...</div>
        </div>
        <div class="queue-position">
          <div class="queue-label">Your position in queue</div>
          <div class="queue-number" id="queueNumber">2</div>
          <div class="queue-time">Estimated wait: ~2 minutes</div>
        </div>
      </div>

      <!-- Input Area -->
      <div class="input-area" id="inputArea">
        <div class="input-wrapper">
          <textarea
            class="text-input"
            id="textInput"
            placeholder="Type your message..."
            rows="1"
            onkeydown="handleKeyDown(event)"
          ></textarea>
          <div class="input-actions">
            <button class="action-btn voice" id="voiceBtn" onclick="toggleVoiceInput()" title="Hold to speak">
              üé§
            </button>
            <button class="action-btn send" onclick="sendMessage()" title="Send message">
              ‚û§
            </button>
          </div>
        </div>
        <div class="quick-actions">
          <button class="quick-action" onclick="quickAction('switch-voice')">üéôÔ∏è Switch to Voice</button>
          <button class="quick-action" onclick="quickAction('speak-agent')">üë§ Speak to Agent</button>
          <button class="quick-action" onclick="quickAction('help')">‚ùì I need help</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    Powered by Azure AI ‚Ä¢ Conversation is encrypted and secure ‚Ä¢ <a href="#" style="color: inherit;">Privacy Policy</a>
  </footer>

  <script>
    let currentMode = 'chat';
    let messageCount = 0;
    let progress = 25;

    // Demo conversation flow
    const demoResponses = {
      name: {
        response: "Thank you, {name}! I've recorded your name. Now, let's move on to some health-related questions. This helps us provide you with the best coverage options.",
        followUp: "Have you been diagnosed with or treated for high blood pressure in the past 5 years?",
        progress: 35
      },
      bp_yes: {
        response: "I understand. For blood pressure conditions, I'll need to ask a few more detailed questions to ensure accurate underwriting.",
        followUp: "Are you currently taking any medication to control your blood pressure?",
        progress: 45,
        suggestVoice: true
      },
      bp_no: {
        response: "Great, thank you for confirming. Let's continue with the next section.",
        followUp: "Have you been diagnosed with diabetes (Type 1 or Type 2)?",
        progress: 45
      },
      complex: {
        response: "I can see this is getting detailed. Would you like to continue this conversation by voice? Many applicants find it easier to discuss medical history verbally.",
        suggestVoice: true,
        progress: 50
      }
    };

    function switchMode(mode) {
      currentMode = mode;

      // Update tabs
      document.querySelectorAll('.mode-tab').forEach(tab => {
        tab.classList.toggle('active', tab.dataset.mode === mode);
      });

      // Show/hide overlays
      document.getElementById('conversation').style.display = mode === 'chat' ? 'flex' : 'none';
      document.getElementById('voiceOverlay').classList.toggle('active', mode === 'voice');
      document.getElementById('agentOverlay').classList.toggle('active', mode === 'agent');
      document.getElementById('inputArea').style.display = mode === 'agent' ? 'none' : 'block';

      // Add system message for mode switch
      if (mode === 'voice') {
        addSystemMessage('üéôÔ∏è Switched to Voice Mode - Your conversation continues');
        simulateVoiceMode();
      } else if (mode === 'agent') {
        addSystemMessage('üë§ Requesting Human Agent - Please hold');
        simulateAgentQueue();
      } else if (mode === 'chat') {
        addSystemMessage('üí¨ Returned to Chat Mode');
      }

      // Hide banner
      document.getElementById('switchBanner').classList.remove('visible');
    }

    function addMessage(text, isUser = false, mode = currentMode) {
      const conversation = document.getElementById('conversation');
      const modeIcons = { chat: 'üí¨', voice: 'üéôÔ∏è', agent: 'üë§' };

      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;

      const bubble = document.createElement('div');
      bubble.className = 'message-bubble';
      bubble.innerHTML = text;

      const meta = document.createElement('div');
      meta.className = 'message-meta';
      meta.innerHTML = isUser ? 'You' : 'AI Assistant';
      if (mode !== 'chat') {
        meta.innerHTML += ` <span class="message-mode">${modeIcons[mode]} ${mode.charAt(0).toUpperCase() + mode.slice(1)}</span>`;
      }

      messageDiv.appendChild(bubble);
      messageDiv.appendChild(meta);
      conversation.appendChild(messageDiv);
      conversation.scrollTop = conversation.scrollHeight;
    }

    function addSystemMessage(text) {
      const conversation = document.getElementById('conversation');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message system';
      messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
      conversation.appendChild(messageDiv);
      conversation.scrollTop = conversation.scrollHeight;
    }

    function showTypingIndicator() {
      const conversation = document.getElementById('conversation');
      const typing = document.createElement('div');
      typing.className = 'message ai';
      typing.id = 'typingIndicator';
      typing.innerHTML = `
        <div class="typing-indicator">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
      `;
      conversation.appendChild(typing);
      conversation.scrollTop = conversation.scrollHeight;
    }

    function hideTypingIndicator() {
      const typing = document.getElementById('typingIndicator');
      if (typing) typing.remove();
    }

    function sendMessage() {
      const input = document.getElementById('textInput');
      const text = input.value.trim();
      if (!text) return;

      addMessage(text, true);
      input.value = '';
      messageCount++;

      // Simulate AI response
      showTypingIndicator();
      setTimeout(() => {
        hideTypingIndicator();
        processUserInput(text);
      }, 1000 + Math.random() * 1000);
    }

    function processUserInput(text) {
      const lowerText = text.toLowerCase();

      if (messageCount === 1) {
        // First message - assume it's their name
        const response = demoResponses.name;
        addMessage(response.response.replace('{name}', text));
        setTimeout(() => addMessage(response.followUp), 800);
        updateProgress(response.progress);
      } else if (lowerText.includes('yes') && messageCount === 2) {
        const response = demoResponses.bp_yes;
        addMessage(response.response);
        setTimeout(() => addMessage(response.followUp), 800);
        updateProgress(response.progress);
        if (response.suggestVoice) {
          setTimeout(() => showVoiceSuggestion(), 2000);
        }
      } else if (lowerText.includes('no') && messageCount === 2) {
        const response = demoResponses.bp_no;
        addMessage(response.response);
        setTimeout(() => addMessage(response.followUp), 800);
        updateProgress(response.progress);
      } else if (lowerText.includes('agent') || lowerText.includes('human') || lowerText.includes('person')) {
        addMessage("Of course! Let me connect you with a human agent who can assist you further.");
        setTimeout(() => switchMode('agent'), 1500);
      } else if (lowerText.includes('voice') || lowerText.includes('call') || lowerText.includes('speak')) {
        addMessage("Switching you to voice mode now. You can speak naturally and I'll continue helping you.");
        setTimeout(() => switchMode('voice'), 1500);
      } else {
        // Generic response for demo
        addMessage("Thank you for that information. Let me make a note of that and continue with the application.");
        updateProgress(progress + 5);
      }
    }

    function showVoiceSuggestion() {
      const banner = document.getElementById('switchBanner');
      banner.classList.add('visible');
    }

    function handleBannerClick() {
      switchMode('voice');
    }

    function updateProgress(newProgress) {
      progress = Math.min(newProgress, 100);
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('progressText').textContent = progress + '%';
    }

    function handleKeyDown(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    }

    function quickAction(action) {
      switch(action) {
        case 'switch-voice':
          addMessage("I'd like to continue by voice", true);
          showTypingIndicator();
          setTimeout(() => {
            hideTypingIndicator();
            addMessage("Switching you to voice mode now. You can speak naturally.");
            setTimeout(() => switchMode('voice'), 1000);
          }, 800);
          break;
        case 'speak-agent':
          addMessage("I'd like to speak with a human agent", true);
          showTypingIndicator();
          setTimeout(() => {
            hideTypingIndicator();
            addMessage("Absolutely! Let me connect you with one of our specialists.");
            setTimeout(() => switchMode('agent'), 1000);
          }, 800);
          break;
        case 'help':
          addMessage("I need help", true);
          showTypingIndicator();
          setTimeout(() => {
            hideTypingIndicator();
            addMessage("I'm here to help! You can:<br>‚Ä¢ Type your answers to continue the application<br>‚Ä¢ Click 'üéôÔ∏è Switch to Voice' to speak instead<br>‚Ä¢ Click 'üë§ Speak to Agent' for human assistance<br><br>What would you like to do?");
          }, 800);
          break;
      }
    }

    function toggleVoiceInput() {
      const btn = document.getElementById('voiceBtn');
      btn.classList.toggle('active');
      // In real implementation, this would start/stop voice recording
    }

    function simulateVoiceMode() {
      const status = document.getElementById('voiceStatus');
      const transcript = document.getElementById('voiceTranscript');

      const phrases = [
        { status: 'Listening...', transcript: '"..."' },
        { status: 'Processing...', transcript: '"Yes, I take lisinopril..."' },
        { status: 'AI Speaking', transcript: 'Responding about medication dosage...' },
        { status: 'Listening...', transcript: '"..."' },
      ];

      let i = 0;
      const interval = setInterval(() => {
        if (currentMode !== 'voice' || i >= phrases.length) {
          clearInterval(interval);
          return;
        }
        status.textContent = phrases[i].status;
        transcript.textContent = phrases[i].transcript;
        i++;
      }, 2500);
    }

    function simulateAgentQueue() {
      const queueNum = document.getElementById('queueNumber');
      let pos = 2;

      const interval = setInterval(() => {
        if (currentMode !== 'agent' || pos <= 0) {
          clearInterval(interval);
          if (pos <= 0) {
            document.querySelector('.agent-name').textContent = 'Sarah M.';
            document.querySelector('.agent-status').textContent = 'Connected! Sarah is reviewing your conversation...';
            document.querySelector('.queue-position').innerHTML = `
              <div style="color: #22c55e; font-size: 1.5rem;">‚úì Connected</div>
              <div style="color: #64748b; font-size: 0.9rem; margin-top: 0.5rem;">Agent has your full conversation history</div>
            `;
          }
          return;
        }
        pos--;
        queueNum.textContent = pos;
      }, 3000);
    }

    // Auto-resize textarea
    document.getElementById('textInput').addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });
  </script>
</body>
</html>
